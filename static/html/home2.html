<!doctype html>
<html class="no-js">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>网络高清缩略图抓取demo</title>
    <!-- Set render engine for 360 browser -->
    <meta name="renderer" content="webkit">
    <!-- No Baidu Siteapp-->
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="icon" type="image/png" href="image/favicon.png">

    <link rel="stylesheet" href="/static/js/libs/AmazeUi/css/amazeui.min.css">
    <link rel="stylesheet" type="text/css" href="/static/js/libs/fancybox/jquery.fancybox.css?v=2.1.5" media="screen" />
    <style>
    
    </style>
</head>
<body>
    <header class="am-topbar">
        <h1 class="am-topbar-brand">
            <i class="am-icon-btn am-icon-search"></i><a href="#">高清缩略图抓取</a>
        </h1>
        <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only"
              data-am-collapse="{target: '#doc-topbar-collapse'}"><span class="am-sr-only">导航切换</span> <span
          class="am-icon-bars"></span></button>
        <div class="am-collapse am-topbar-collapse" id="doc-topbar-collapse">
            <form class="am-topbar-form am-topbar-right am-form-inline" action="/s" method="get" role="search">
                <div class="am-form-group am-form-icon">
                    <i class="am-icon-search"></i>
                    <input type="text" name="key" value="{{.Keyword}}" class="am-form-field am-input-sm" placeholder="请输入关键词">
                </div>
                <button type="submit" class="am-btn am-btn-default am-btn-sm">搜索</button>
            </form>
        </div>  
    </header>
    <div class="am-g am-g-fixed">
        <ul class="am-avg-sm-2 am-avg-md-3 am-avg-lg-4 am-thumbnails" id="image-list">
		{{range .Items}}
			<li><a class="fancybox" href="#xiuxiuEditor"><img class="am-thumbnail" bigPic="{{.Img}}" src="{{.Thumbnail}}" from="{{.From}}" desc="{{.Desc}}"  /></a></li>
		{{end}}
        </ul>

    </div>

    
    <div id="xiuxiu-div" style="dispaly:none;"></div>
    
    

<!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="/static/js/libs/AmazeUi/js/polyfill/rem.min.js"></script>
<script src="/static/js/libs/AmazeUi/js/polyfill/respond.min.js"></script>
<script src="/static/js/libs/AmazeUi/js/amazeui.legacy.js"></script>
<![endif]-->

<!--[if (gte IE 9)|!(IE)]><!-->
<script src="/static/js/libs/AmazeUi/js/jquery.min.js"></script>
<script src="/static/js/libs/AmazeUi/js/amazeui.min.js"></script>
<!--<![endif]-->
<script src="http://open.web.meitu.com/sources/xiuxiu.js" type="text/javascript"></script>
<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="/static/js/libs/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>


<script type="text/javascript">
(function($) {

  $(function() {

    $("#image-list img").on("click", function(){
        var imgSrc = $(this).attr("bigPic");
		console.log(imgSrc);
        xiuxiu.setLaunchVars("customMenu", [{"decorate":["basicEdit"]}]);
        xiuxiu.setLaunchVars ("nav", "decorate/basicEdit");
        xiuxiu.setLaunchVars("quality", 100);
        /*第1个参数是加载编辑器div容器，第2个参数是编辑器类型，第3个参数是div容器宽，第4个参数是div容器高*/
        xiuxiu.embedSWF("xiuxiu-div",3,1200,850);
           //修改为您自己的图片上传接口
        xiuxiu.setUploadURL("http://web.upload.meitu.com/image_upload.php");
        xiuxiu.setUploadURL("http://localhost/pic_fetch_web/upload.php");
        xiuxiu.setUploadType(2);
        xiuxiu.setUploadDataFieldName("upload_file");
        xiuxiu.onInit = function ()
        {
            xiuxiu.loadPhoto(imgSrc);
        }   
        xiuxiu.onUploadResponse = function (data)
        {
            //alert("上传响应" + data);  //可以开启调试
            $.fancybox.close();
            clearFlash();
        }
        xiuxiu.onDebug = function (data)
        {
            alert("错误响应" + data);
        }
        xiuxiu.onClose = function (id)
        {
            //alert(id + "关闭");
            clearFlash();
        }
        //清除flash
        function clearFlash()
        {
            document.getElementById("flashEditorOut").innerHTML='<div id="flashEditorContent"><p><a href="http://www.adobe.com/go/getflashplayer"><img alt="Get Adobe Flash player" src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"></a></p></div>';
        }
    });

    $(".fancybox").fancybox();

  });
})(jQuery);

</script>
</body>
</html>
